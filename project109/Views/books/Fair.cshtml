@model IEnumerable<project109.Models.view_books>

@{
    ViewBag.Title = "Index";
}

<h2>Books Fair</h2>


<p>Search Books</p>
<form id="frmsrch" name="frmsrch" method="get" action="">
    <div class="form-group">
        <div class="form-horizontal">
            <span class="control-label col-md-2"><strong>Book Title Keyword</strong></span>
            <div class="col-md-10">
                @*<input type="text" name="txtttl" id="txtttl" class="form-control">*@
                @Html.Editor("txtttl", new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>
        <div class="form-group">
            <span class="control-label col-md-2"><strong>Book Category</strong></span>
            <div class="col-md-10">
              @Html.DropDownList("ddlcat", null, "All", htmlAttributes: new { @class = "form-control"})
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Search" class="btn btn-default" />
            </div>
        </div>
    </div>
</form>

<br><br><br><br><br><br><hr>
@{ int x = 0;}
    <div class="row">
        @foreach (var item in Model)
        {
            
            if (x != 0 && x % 4 == 0)
            {
                @:</div><br>
                @:<div class="row">
            }
            <div class="col-md-3"  align="center">
                <div style="margin: 3px 3px 3px 3px;border:solid 1px;" id="blk2" class="blk2">
                <table width="200" border="0" cellpadding="0" cellspacing="0">
                    <tr>
                        <td align="center"  valign="top"><br>
                        @{if (item.book_cover != null)
                {<img src="~/Content/images/Covers/@item.book_cover" style="max-width:200px;max-height:300px;" /> }
                else
                { <img src="~/Content/images/Covers/bookthumb.jpg" style="max-width:200px;" />}
                        }
                        </td>
                    </tr>
                    <tr>
                        <td align="center">
                          <br>  <table border="1" cellpadding="0" cellspacing="0">

                                <tr>
                                    <td colspan="2" align="center"><strong>@Html.DisplayFor(modelItem => item.book_Title)</strong></td>
                                </tr>
                                <tr>
                                    <td>Category:</td>
                                    <td align="center">@Html.DisplayFor(modelItem => item.cat_name)</td>
                                </tr>
                                <tr>
                                    <td>Owner:</td>
                                    <td align="center">@Html.DisplayFor(modelItem => item.RealName)</td>
                                </tr>
                                <tr>
                                    <td>Publisher:</td>
                                    <td align="center">@Html.DisplayFor(modelItem => item.publisher_name)</td>
                                </tr>
                                <tr>
                                    <td>Language:</td>
                                    <td align="center">@Html.DisplayFor(modelItem => item.book_language)</td>
                                </tr>
                                <tr>
                                    <td>Author:</td>
                                    <td align="center">@Html.DisplayFor(modelItem => item.author_name)</td>
                                </tr>
                                <tr>
                                    <td>Added At:</td>
                                    <td align="center">
                                        @{var m = Convert.ToDateTime(item.date_insert).ToShortDateString(); }
                                        @Html.Raw(m)
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" align="center">

                                        @Html.ActionLink("Details", "Details", new { id = item.Id })
                                        @if (Session["isAdmin"] != null && Convert.ToInt32(item.sold_by) != Convert.ToInt32(Session["adminid"]))
                                        {
                                            <br>@Html.ActionLink("Request", "../orders/Create", new { id = item.Id })
                                        }
                                    </td>
                                </tr>
                            </table>

                        </td>
                    </tr>
                </table><br>
                <br></div>
            </div>
            x++;

        }
    </div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <SCRIPT>
        //function to unify all cells heights

        $(document).ready(function () {
            //alert("ddd");
 var maxHeight = -1;
 $(".col-md-3").each(function () {
 maxHeight = maxHeight > $(this).height() ? maxHeight : $(this).height();
});
 $(".col-md-3").each(function () {
$(this).height(maxHeight);
 });
 $(".blk2").each(function () {
     maxHeight = maxHeight > $(this).height() ? maxHeight : $(this).height();
 });
 $(".blk2").each(function () {
     $(this).height(maxHeight);
 });


});
    </SCRIPT>
}



